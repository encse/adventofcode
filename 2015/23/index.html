<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link href='https://fonts.googleapis.com/css?family=Noto Sans' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
    <title>Advent of Code 2015/23 'Opening the Turing Lock'' in C# by encse</title>

    <head>
        <meta property="og:title" content="Advent of Code 2015/23 'Opening the Turing Lock' in C# by encse">
        <meta property="og:description" content="C# solution to the 'Opening the Turing Lock' Advent of Code problem.">
        <meta property="og:image" content="https://aoc.csokavar.hu/2015/23//illustration.jpg">
        <meta property="og:url" content="https://aoc.csokavar.hu/2015/23/">
        <meta property="og:type" content="website">
      </head>


    <style>
        html {
            --theme-background-color: #2b2b2b;
            --theme-background-color2: #0d1117;
        }

        * {
            box-sizing: border-box;
            /* text is too big without these in my iphone */
            -moz-text-size-adjust: none;
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
        }

        @media (min-width:2000px) {
            html {
                font-size: 1.9em;
            }
        }

        a {
            color: inherit;
        }

        body {
            background: var(--theme-background-color);
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans', 'Arial', sans-serif;
            color: white;
        }

        .main {
            width: 100ch;
            display: flex;
            flex-direction: column;
            padding: 1em;
            margin: 4em auto;
        }


        .header-container {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap-reverse;
            justify-content: center;
            gap: 1em;
            overflow: hidden;
            position: relative;
        }

        .header-image {
            display: flex;
            min-width: 400px;
            position: relative;
            position: absolute;
            z-index: -1;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }

        .header-image img {
            object-fit: cover;
        }

        .header-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            text-align: center;
            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7); 
            padding: 10em;
            background-image: radial-gradient(rgba(194, 194, 194, 0.03), rgba(195, 195, 195, 0.05));
        }

        .header-title h2 {
            font-size: 400%;
            margin: 0;
        }

        .header-title p {
            font-size: 150%;
        }

        #dropdown-label {
            text-align: center;
            margin: 1em;
        }

        .dropdown-toggle {
            display: none; /* Hide the checkbox */
        }

        .dropdown-content {
            display: none;
            position: absolute;
            z-index: 1;
            list-style: none;
            background-color: #0d1117;
        }

        .dropdown-content {
            flex-direction: column;

        }

        .dropdown-content a {
            margin: 0.5em 1em;
        }

        #dropdown-toggle:checked  ~ .dropdown-content {
            display: flex; 
        }

        #top-nav,
        #bottom {
            background: var(--theme-background-color2);
            padding: 1em;
        }

        #year-picker select {
            border: none;
            background: inherit;
            font-size: inherit;
            color: inherit;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        #top-nav a,
        .header-container a {
            text-decoration: none;
        }

        #top-nav .current {
            color: var(--theme-background-color2);
            background: white;
        }

        #bottom {
            background: var(--theme-background-color2);
            display: flex;
            flex-wrap: wrap;
            gap: 2em;
            justify-content: center;
        }

        #top-nav {
            display: flex;
        }

        #top-nav select {
            margin-left: 1em;
            margin-right: 1em;
        }

        #day-picker {
            display: flex;
            flex-wrap: wrap;
        }

        #day-picker a {
            margin: 1em;
        }

        #code-container {
            overflow: auto;
            scroll-behavior: smooth;
        }

        .hljs {
            background: var(--theme-background-color2);
        }

        .hljs-ln-numbers {
            padding-right: 1em !important;
            text-align: right;
        }

        .content {
            line-height: 1.5;
            margin-top: 2em;
            /* hyphens: auto; */
        }

        .content img {
            width: 70%;
        }


        @media (max-width: 1024px) {
            .main {
                width: inherit;
            }

            .content {
                width: 100%;
            }

            .header-title h2 {
                font-size: 300%;
            }
        }

        @media (orientation: landscape) {
            main {
                width: 90%;
            }
        }
    </style>
</head>

<body lang="en-US">
    <div id="top-nav">
        <div id="year-picker"><nav class="dropdown">
            <input type="checkbox" id="dropdown-toggle" class="dropdown-toggle">
            <span class="current"><label id="dropdown-label" for="dropdown-toggle">2015</label></span>
            <div class="dropdown-content"><a href="/2015/25/">2015</a><a href="/2016/25/">2016</a><a href="/2017/25/">2017</a><a href="/2018/25/">2018</a><a href="/2019/25/">2019</a><a href="/2020/25/">2020</a><a href="/2021/25/">2021</a><a href="/2022/25/">2022</a><a href="/2023/25/">2023</a><a href="/2024/25/">2024</a><a href="/2025/4/">2025</a></div>
        </nav>
     </div>
        <div id="day-picker"><span><a href="/2015/1">01</a></span><span><a href="/2015/2">02</a></span><span><a href="/2015/3">03</a></span><span><a href="/2015/4">04</a></span><span><a href="/2015/5">05</a></span><span><a href="/2015/6">06</a></span><span><a href="/2015/7">07</a></span><span><a href="/2015/8">08</a></span><span><a href="/2015/9">09</a></span><span><a href="/2015/10">10</a></span><span><a href="/2015/11">11</a></span><span><a href="/2015/12">12</a></span><span><a href="/2015/13">13</a></span><span><a href="/2015/14">14</a></span><span><a href="/2015/15">15</a></span><span><a href="/2015/16">16</a></span><span><a href="/2015/17">17</a></span><span><a href="/2015/18">18</a></span><span><a href="/2015/19">19</a></span><span><a href="/2015/20">20</a></span><span><a href="/2015/21">21</a></span><span><a href="/2015/22">22</a></span><span class="current"><a href="/2015/23">23</a></span><span><a href="/2015/24">24</a></span><span><a href="/2015/25">25</a></span></div>
    </div>
    <div class="main">
        <div class="header-container">
            <div class="header-image">
                <img id="cover" width="100%" src="illustration.jpg" />
            </div>

            <div class="header-title">
                <p class="text">Advent of Code</p>
                <h2 id="problem-id">2015/23</h2>
                <h2 id="problem-name">Opening the Turing Lock</h2>
                <p class="text">in C#</p>
                <p class="text"></p>
                <p class="text"><em>by <a style="text-decoration: underline"
                            href="https://github.com/sponsors/encse">encse</a></em></p>
            </div>

        </div>

        <div class="content">
            <div id="notes"><p>Little Jane Marie just got her very first computer for Christmas from some unknown benefactor.  It comes with instructions and an example program, but the computer itself seems to be malfunctioning.  She&#39;s curious what the program does, and would like you to help her run it.</p>
<p>The manual explains that the computer supports two <a href="https://en.wikipedia.org/wiki/Processor_register">registers</a> and six <a href="https://en.wikipedia.org/wiki/Instruction_set">instructions</a> (truly, it goes on to remind the reader, a state-of-the-art technology). The registers are named <code>a</code> and <code>b</code>, can hold any <a href="https://en.wikipedia.org/wiki/Natural_number">non-negative integer</a>, and begin with a value of <code>0</code>.  The instructions are as follows:</p>
<p>Read the <a href="https://adventofcode.com/2015/day/23">full puzzle</a>.</p>
</div>
            <div id="code-container"><pre class="hljs language-csharp"><code>using System;
using System.Collections.Generic;

namespace AdventOfCode.Y2015.Day23;

[ProblemName(&quot;Opening the Turing Lock&quot;)]
class Solution : Solver {

    public object PartOne(string input) =&gt; Solve(input, 0);
    public object PartTwo(string input) =&gt; Solve(input, 1);

    long Solve(string input, long a) {
        var regs = new Dictionary&lt;string, long&gt;();
        var ip = 0L;
        long getReg(string reg) {
            return long.TryParse(reg, out var n) ? n
                : regs.ContainsKey(reg) ? regs[reg]
                : 0;
        }
        void setReg(string reg, long value) {
            regs[reg] = value;
        }

        setReg(&quot;a&quot;, a);
        var prog = input.Split(&#039;\n&#039;);
        while (ip &gt;= 0 &amp;&amp; ip &lt; prog.Length) {
            var line = prog[ip];
            var parts = line.Replace(&quot;,&quot;, &quot;&quot;).Split(&quot; &quot;);
            switch (parts[0]) {
                case &quot;hlf&quot;:
                    setReg(parts[1], getReg(parts[1]) / 2);
                    ip++;
                    break;
                case &quot;tpl&quot;:
                    setReg(parts[1], getReg(parts[1]) * 3);
                    ip++;
                    break;
                case &quot;inc&quot;:
                    setReg(parts[1], getReg(parts[1]) + 1);
                    ip++;
                    break;
                case &quot;jmp&quot;:
                    ip += getReg(parts[1]);
                    break;
                case &quot;jie&quot;:
                    ip += getReg(parts[1]) % 2 == 0 ? getReg(parts[2]) : 1;
                    break;
                case &quot;jio&quot;:
                    ip += getReg(parts[1]) == 1 ? getReg(parts[2]) : 1;
                    break;
                default: throw new Exception(&quot;Cannot parse &quot; + line);
            }
        }
        return getReg(&quot;b&quot;);
    }
}
</code></pre></div>
            <div id="code-location"> <p>Please ☆ my <a href="https://github.com/encse/adventofcode/">repo</a> if you like it!</p></div>
        </div>

    </div>
    <div id="bottom">
        <span>© <span id="currentYear">2025</span> | 
        <a href="https://adventofcode.com">Advent of Code</a> is a registered trademark in the US | 
        Images provided by <a href="https://www.bing.com/images/create">Bing</a> and <a href="https://gemini.google.com/app">Nano Banana</a></span>
    </div>
 
    <script>
        // This will automatically apply highlight.js to all <pre><code> blocks
        document.addEventListener('DOMContentLoaded', function () {

        let yearPicker = document.querySelector('#year-picker select')
        if (yearPicker) {
            yearPicker.addEventListener('change', function () {
                window.location = this.value;
            });
        }

          // Automatically highlight all <code> blocks inside <pre>
          hljs.highlightAll();
        });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P8Y1BWSSF3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-P8Y1BWSSF3');
    </script>
</body>

</html>